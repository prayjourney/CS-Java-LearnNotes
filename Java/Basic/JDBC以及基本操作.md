### JDBC连接和基本操作
- - -

在jdbc的连接之中，有==驱动名==，==数据库名==，==用户名==，==密码==，四个关键词需要指明，由于数据库连接不会经常改动，所以可以将其设置成final修饰的String字符串，下面就是mariadb的连接的基本信息。
```java
    public static final String Driver = "org.mariadb.jdbc.Driver";
    public static final String URl = "jdbc:mariadb://localhost:3326/test";
    public static final String User = "root";
    public static final String Password = "abc123";
```



#####  基本操作

###### JDBC 的操作步骤

- [ 在进行JDBC 操作的时候可以按照以下的步骤完成：

  1. *加载数据库驱动程序*，加载的时候需要将驱动程序配置到classpath之中

  2. *连接数据库*，通过Connection 接口和 DriverManager 类完成

  3. *操作数据库*，通过Statement、PreparedStatement、ResultSet 三个接口完成

  4. *关闭数据库*，在实际开发中数据库资源非常有限，操作完之后必须关闭

- 数据库连接操作

  **在JDBC 的操作中，如果要想进行数据库的连接，则必须按照以上的几步完成**

  1. 通过Class.forName()加载数据库的驱动程序

  2. 通过DriverManager 类进行数据库的连接，连接的时候要输入数据库的连接地址、用户名、密码

  3. 通过Connection 接口接收连接

  _如下是连接的例子_

```java
    import java.sql.Connection;
    import java.sql.DriverManager;
    public class ConnectionJDBC {
    //驱动程序就是之前在classpath中配置的JDBC的驱动程序的JAR 包中
    public static final String DBDRIVER = "com.mysql.jdbc.Driver";
    //连接地址是由各个数据库生产商单独提供的，所以需要单独记住
    public static final String DBURL = "jdbc:mysql://localhost:3306/test";
    //连接数据库的用户名
    public static final String DBUSER = "root";
    //连接数据库的密码
    public static final String DBPASS = "";
    public static void main(String[] args) throws Exception {
        //表示数据库的连接对象
        Connection con = null;
        //1、使用CLASS 类加载驱动程序
        Class.forName(DBDRIVER);
        //2、连接数据库
        con = DriverManager.getConnection(DBURL,DBUSER,DBPASS);
        System.out.println(con);
        // 3、关闭数据库
        con.close();
    }
}
```
- - -

###### java.sql中相关的API

- **DriverManager**
  其继承于Object，其主要作用是获得数据库连接，其中的方法多为静态方法，如：
  ```java
  static Connection getConnection(String url)
  static Connection	getConnection(String url, String user, String password)
  ```
- **Connection**
  其是一个接口，常用的作用是创建一个可以连接到某个数据库的连接，并且对连接实行提交，关闭，并且可对连接的状态，属性做相应的修改。

- **Statement**
  一个接口，用来执行一个静态sql语句，并且返回相应的结果，结果存在于ResultSet之中。
  主要的方法有：
  ```java
  - boolean	    execute(String sql)
    Executes the given SQL statement, which may return multiple results.
  - ResultSet	executeQuery(String sql)
    Executes the given SQL statement, which returns a single ResultSet object.
  - int	        executeUpdate(String sql)
    Executes the given SQL statement, which may be an INSERT, UPDATE, or DELETE statement or an SQL statement that returns nothing, such as an SQL DDL statement.
  ```

- **PreparedStatement**
  是一个接口，继承于是==Statement==,和Statement相比，它的主要区别在于其将sql语句进行了预编译，并且将其作为预编译的对象存储起来，从而可以在多次执行中加快速度。
  主要方法有：
  ```java
  - boolean	execute()
Executes the SQL statement in this PreparedStatement object, which may be any kind of SQL statement.
  - ResultSet	executeQuery()
Executes the SQL query in this PreparedStatement object and returns the ResultSet object generated by the query.
  - int	executeUpdate()
Executes the SQL statement in this PreparedStatement object, which must be an SQL Data Manipulation Language (DML) statement, such as INSERT, UPDATE or DELETE; or an SQL statement that returns nothing, such as a DDL statement.
  - void	setDouble(int parameterIndex, double x)
Sets the designated parameter to the given Java double value.
  - void	setString(int parameterIndex, String x)
Sets the designated parameter to the given Java String value.
  - void	setDate(int parameterIndex, Date x)
Sets the designated parameter to the given java.sql.Date value using the default time zone of the virtual machine that is running the application.
  ```
- **CallableStatement**
  是一个接口，继承于PreparedStatement，主要用于执行存储过程。==*The interface used to execute SQL stored procedures. *==，其主要的方法和PreparedStatement类似。

- **ResultSet**
  是一个接口，继承于Wrapper, AutoCloseable，一个表格形式的存储查询结果的接口，其中有一个游标，在第一个数据之前，因此其可以作为一个循环的条件。默认情况下，该游标只可以往前走，不能后退，ResultSet对象在Statement对象关闭之后自动关闭。*A table of data representing a database result set, which is usually generated by executing a statement that queries the database.
A ResultSet object maintains a cursor pointing to its current row of data. Initially the cursor is positioned before the first row. The next method moves the cursor to the next row, and because it returns false when there are no more rows in the ResultSet object, it can be used in a while loop to iterate through the result set.
A default ResultSet object is not updatable and has a cursor that moves forward only. Thus, you can iterate through it only once and only from the first row to the last row.*
  主要方法有：
  ```java
  - boolean	next()
    Moves the cursor forward one row from its current position.
  - boolean	previous()
    Moves the cursor to the previous row in this ResultSet object.
  - boolean	wasNull()
    Reports whether the last column read had a value of SQL NULL.
  - void	updateInt(int columnIndex, int x)
    Updates the designated column with an int value.
  - void	updateInt(String columnLabel, int x)
    Updates the designated column with an int value.
  - String	getString(int columnIndex)
    Retrieves the value of the designated column in the current row of this ResultSet object as a String in the Java programming language.
  - String	getString(String columnLabel)
    Retrieves the value of the designated column in the current row of this ResultSet object as a String in the Java programming language.
  - RowId	getRowId(int columnIndex)
    Retrieves the value of the designated column in the current row  of this ResultSet object as a java.sql.RowId object in the Java  programming language.
  - RowId	getRowId(String columnLabel)
    Retrieves the value of the designated column in the current row  of this ResultSet object as a java.sql.RowId object in the Java  programming language.
  ```
- **Wrapper**
  是一个接口，~~提供在有问题的实例实际上是一个代理类时能够检索委托实例的JDBC类的接口。许多JDBC驱动程序实现使用包装器模式来提供超出传统JDBC API的扩展，这些扩展是特定于数据源的。开发人员可能希望获得这些被包装的资源（代理）作为代表实际资源的代理类实例。此接口描述了访问由其代理表示的这些包装资源的标准机制，以允许直接访问资源委托。~~
  Interface for JDBC classes which provide the ability to retrieve the delegate instance when the instance in question is in fact a proxy class.
  The wrapper pattern is employed by many JDBC driver implementations to provide extensions beyond the traditional JDBC API that are specific to a data source. Developers may wish to gain access to these resources that are wrapped (the delegates) as proxy class instances representing the the actual resources. This interface describes a standard mechanism to access these wrapped resources represented by their proxy, to permit direct access to the resource delegates.



##### 一些术语
1. DQL（data query language）是数据查询语言，它们是SELECT语句，对于数据库中的数据进行查询。

2. DML（data manipulation language）是数据操纵语言：它们是UPDATE、INSERT、DELETE，就象它的名字一样，这3条命令是用来对数据库里的数据进行操作的语言，简而言之就是增删改。

3. DDL（data definition language）是数据定义语言：DDL比DML要多，主要的命令有CREATE、ALTER、DROP等，DDL主要是用在定义或改变表（TABLE）的结构，数据类型，表之间的链接和约束等初始化工作上，他们大多在建立表时使用。

4. DCL（DataControlLanguage）是数据库控制语言：是用来设置或更改数据库用户或角色权限的语句，包括（grant,deny,revoke等）语句。

5. ==存储过程，*（Stored Procedure）是在大型数据库系统中，一组为了完成特定功能的SQL 语句集，存储在数据库中，经过第一次编译后再次调用不需要再次编译，用户通过指定存储过程的名字并给出参数（如果该存储过程带有参数）来执行它。存储过程是数据库中的一个重要对象*==。用通俗的话来讲，就是：<font color ="green">"存储过程可以说是一个记录集吧，它是由一些T-SQL语句组成的代码块，这些T-SQL语句代码像一个方法一样实现一些功能（对单表或多表的增删改查），然后再给这个代码块取一个名字，在用到这个功能的时候调用他就行了</font color= "green">"。

6. 事务（Transaction）是并发控制的基本单位。所谓的事务，它是一个操作序列，这些操作要么都执行，要么都不执行，它是一个不可分割的工作单位。



参考：
[存储过程详解](http://www.cnblogs.com/knowledgesea/archive/2013/01/02/2841588.html)，[存储过程-百度百科](https://baike.baidu.com/item/%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1240317)，[DQL、DML、DDL、DCL的概念与区别](http://blog.csdn.net/tomatofly/article/details/5949070),[数据库事务](http://blog.csdn.net/zdwzzu2006/article/details/5947062)，[事务的理解](http://blog.csdn.net/zhangwj0101/article/details/50945379)